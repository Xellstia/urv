<%= form_with model: @work_item, url: work_items_path, data: { turbo: true }, class: "ui-card" do |f| %>
  <div class="ui-section space-y-4">
    <div class="flex items-center justify-between">
      <div class="text-[13px] font-medium text-slate-600">TEMPO</div>
      <div class="text-[12px] text-slate-400">Новая карточка</div>
    </div>

    <%= hidden_field_tag :week_start, params[:week_start] %>
    <%= hidden_field_tag :weekend, params[:weekend] %>
    <%= hidden_field_tag :frame_id, params[:frame_id] %>
    <%= f.hidden_field :system, value: :tempo %>
    <%= f.hidden_field :date, value: @work_item.date || params[:date] %>

    <div>
      <label class="ui-label">Номер задачи</label>
      <%= f.text_field :title, class: "ui-input", placeholder: "APP-123" %>
    </div>

    <div>
      <label class="ui-label">Описание</label>
      <%= f.text_area :description, class: "ui-text", placeholder: "Кратко опишите работу…" %>
    </div>

    <div class="grid grid-cols-2 gap-3">
      <div>
        <label class="ui-label">Время</label>
        <%= f.text_field :minutes_spent, class: "ui-input", placeholder: "1.5h", data: { controller: "time-input" } %>
      </div>
      <div>
        <label class="ui-label">Вид работ</label>
        <%= f.select :tempo_work_kind, (WorkItem.try(:tempo_work_kinds)&.keys || []), {}, class: "ui-select" %>
      </div>
    </div>

    <div class="grid grid-cols-2 gap-3">
      <div>
        <label class="ui-label">ЦС Действия</label>
        <%= f.select :tempo_cs_action, (WorkItem.try(:tempo_cs_actions)&.keys || []), {}, class: "ui-select" %>
      </div>
      <div>
        <label class="ui-label">ЦС ИС</label>
        <%= f.select :tempo_cs_is, (WorkItem.try(:tempo_cs_is)&.keys || []), {}, class: "ui-select" %>
      </div>
    </div>

    <div class="flex items-center justify-end gap-2 pt-1">
      <%= link_to "Отмена", "#", data: { controller: "frame-close" }, class: "btn-ghost" %>
      <%= f.submit "Сохранить", class: "btn-primary" %>
    </div>
  </div>
<% end %>
